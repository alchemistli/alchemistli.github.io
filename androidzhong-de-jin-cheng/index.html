
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Android中的进程</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Android中的进程">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Android中的进程">
    <meta property="og:description" content="">

    <link rel="icon" type="image/png" href="../assets/images/favicon.png">
    <link href="../assets/images/favicon.png" rel="shortcut icon" type="image/png">
    <link href="http://localhost:2368/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link rel="stylesheet" type="text/css" href="../assets/css/vno.css?v=59a1498f09">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../assets/css/tomorrow.css?v=59a1498f09">
    
    <link rel="canonical" href="index.html">
    <meta name="referrer" content="origin">
    
    <meta property="og:site_name" content="Alchemist's Crafts">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Android中的进程">
    <meta property="og:description" content='there are four types of components for an App, &lt;activity&gt;, &lt;service&gt;, &lt;receiver&gt; and &lt;provider&gt;, which support "android:process".&lt;/provider&gt;&lt;/receiver&gt;&lt;/service&gt;&lt;/activity&gt;...'>
    <meta property="og:url" content="http://localhost:2368/androidzhong-de-jin-cheng/">
    <meta property="article:published_time" content="2015-11-25T01:08:45.764Z">
    <meta property="article:modified_time" content="2015-11-25T01:08:45.761Z">
    <meta property="article:tag" content="Android">
    <meta property="article:tag" content="Knowledge">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Android中的进程">
    <meta name="twitter:description" content='there are four types of components for an App, &lt;activity&gt;, &lt;service&gt;, &lt;receiver&gt; and &lt;provider&gt;, which support "android:process".&lt;/provider&gt;&lt;/receiver&gt;&lt;/service&gt;&lt;/activity&gt;...'>
    <meta name="twitter:url" content="http://localhost:2368/androidzhong-de-jin-cheng/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Alchemist's Crafts",
    "author": {
        "@type": "Person",
        "name": "Alchemist Li",
        "url": "http://localhost:2368/author/alchemist",
        "sameAs": null,
        "description": null
    },
    "headline": "Android中的进程",
    "url": "http://localhost:2368/androidzhong-de-jin-cheng/",
    "datePublished": "2015-11-25T01:08:45.764Z",
    "dateModified": "2015-11-25T01:08:45.761Z",
    "keywords": "Android, Knowledge",
    "description": "there are four types of components for an App, &lt;activity&gt;, &lt;service&gt;, &lt;receiver&gt; and &lt;provider&gt;, which support &quot;android:process&quot;.&lt;/provider&gt;&lt;/receiver&gt;&lt;/service&gt;&lt;/activity&gt;..."
}
    </script>

    <meta name="generator" content="Ghost 0.7">
    <link rel="alternate" type="application/rss+xml" title="Alchemist's Crafts" href="../rss/index.rss">

</head>
<body class="post-template tag-android tag-knowledge no-js">

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    <header class="panel-cover panel-cover--collapsed">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="../" title="前往 Alchemist's Crafts 的主页"><img src="../content/images/2015/11/logo.jpeg" width="80" alt="Alchemist's Crafts logo" class="panel-cover__logo logo"></a>
        <h1 class="panel-cover__title panel-title"><a href="../" title="前往 Alchemist's Crafts 的主页">Alchemist's Crafts</a></h1>
        <span class="panel-cover__subtitle panel-subtitle">茗香淡水</span>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">Thoughts, stories and ideas.</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="../index.html#blog" title="访问博客" class="blog-button">博客</a></li>
<!--              <li class="navigation__item"><a href="http://project.onevcat.com" target="_blank" title="我的项目">项目</a></li> -->
<!--              <li class="navigation__item"><a href="http://about.onevcat.com/" title="了解更多">关于</a></li> -->
<!--              <li class="navigation__item"><a href="http://eepurl.com/" title="邮件订阅本站">订阅</a></li> -->
              <li class="navigation__item"><a href="http://alchemistli.github.io/rss/index.rss" title="邮件订阅本站">订阅</a></li>
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">


  <!-- Weibo -->
<!-- 
  <li class="navigation__item">
    <a href="http://weibo.com/onevcat" title="@onevcat 的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
-->

  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/IamAlchemist" title="@IamAlchemist 的 Github" target="_blank">
      <i class="social fa fa-github"></i>
      <span class="label">Github</span>
    </a>
  </li>

  <!-- Twitter -->
  <li class="navigation__item">
    <a href="https://twitter.com/wizardle" title="@Alchemist" target="_blank">
      <i class="social fa fa-twitter"></i>
      <span class="label">Twitter</span>
    </a>
  </li>
  
  <!-- RSS -->
  <li class="navigation__item">
    <a href="../rss/index.rss" rel="author" title="RSS" target="_blank">
      <i class="social fa fa-rss"></i>
      <span class="label">RSS</span>
    </a>
  </li>

  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:babyfat.candy@gmail.com" title="邮件联系我">
      <i class="social fa fa-envelope"></i>
      <span class="label">Email</span>
    </a>
  </li>

  </ul>
</nav>          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-green"></div>
  </div>
</header>
    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            

  <article class="post-container post-container--single">

    <header class="post-header">
      <div class="post-meta">
        <time datetime="25 Nov 2015" class="post-meta__date date">25 Nov 2015</time> • <span class="post-meta__tags tags">于 <a href="../tag/android/">Android</a>, <a href="../tag/knowledge/">Knowledge</a></span>
        <!--<span class="post-meta__author author"><img src="" alt="profile image for Alchemist Li" class="avatar post-meta__avatar" /> by Alchemist Li</span>-->
      </div>
      <h1 class="post-title">Android中的进程</h1>
    </header>

    <section class="post tag-android tag-knowledge">
      there are four types of components for an App, <activity>, <service>, <receiver> and <provider>, which support "android:process".  
<!--more-->

<p>one App can have multi-processes via "android:process", and multi apps can share one process via share the same Linux user ID and signed with the same</p>

<h3 id="processlifecycle">Process lifecycle</h3>

<ul>
<li>Foreground process</li>
</ul>

<p>A process that is required for what the user is currently doing. A process is considered to be in the foreground if any of the following conditions are true:</p>

<blockquote>
  <p>It hosts an Activity that the user is interacting with (the Activity's onResume() method has been called).</p>
  
  <p>It hosts a Service that's bound to the activity that the user is interacting with.</p>
  
  <p>It hosts a Service that's running "in the foreground"—the service has called startForeground().</p>
  
  <p>It hosts a Service that's executing one of its lifecycle callbacks (onCreate(), onStart(), or onDestroy()).</p>
  
  <p>It hosts a BroadcastReceiver that's executing its onReceive() method.</p>
</blockquote>

<ul>
<li>Visible Process</li>
</ul>

<p>A process that doesn't have any foreground components, but still can affect what the user sees on screen. A process is considered to be visible if either of the following conditions are true:</p>

<blockquote>
  <p>It hosts an Activity that is not in the foreground, but is still visible to the user (its onPause() method has been called). This might occur, for example, if the foreground activity started a dialog, which allows the previous activity to be seen behind it.</p>
  
  <p>It hosts a Service that's bound to a visible (or foreground) activity.</p>
</blockquote>

<p>A visible process is considered extremely important and will not be killed unless doing so is required to keep all foreground processes running.</p>

<ul>
<li>Sevice process</li>
</ul>

<p>A process that is running a service that has been started with the startService() method and does not fall into either of the two higher categories. Although service processes are not directly tied to anything the user sees, they are generally doing things that the user cares about (such as playing music in the background or downloading data on the network), so the system keeps them running unless there's not enough memory to retain them along with all foreground and visible processes.</p>

<ul>
<li>Background process</li>
</ul>

<p>A process holding an activity that's not currently visible to the user (the activity's onStop() method has been called). These processes have no direct impact on the user experience, and the system can kill them at any time to reclaim memory for a foreground, visible, or service process. Usually there are many background processes running, so they are kept in an <em>LRU (least recently used)</em> list to ensure that the process with the activity that was most recently seen by the user is the last to be killed. If an activity implements its lifecycle methods correctly, and saves its current state, killing its process will not have a visible effect on the user experience, because when the user navigates back to the activity, the activity restores all of its visible state. See the Activities document for information about saving and restoring state.</p>

<ul>
<li>Empty process
A process that doesn't hold any active application components. The only reason to keep this kind of process alive is for caching purposes, to improve startup time the next time a component needs to run in it. The system often kills these processes in order to balance overall system resources between process caches and the underlying kernel caches.</li>
</ul>

<h3 id="threads">Threads</h3>

<ul>
<li><p>How to access UI thread from other threads</p>

<blockquote>
  <p>Handler</p>
  
  <p>AsyncTask</p>
  
  <p>Others</p>
  
  <blockquote>
    <p>Activity.runOnUiThread(Runable)</p>
    
    <p>View.post(Runnable)</p>
    
    <p>View.postDelayed(Runnable)</p>
  </blockquote>
</blockquote></li>
<li><p>Caution 1: need to consider <em>runtime configuration change</em></p></li>
<li><p>Caution 2: need to consider therad-safe</p></li>
</ul>
    </provider></receiver></service></activity></section>

  </article>

  <section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'alchemistliscraft'; // required: replace example with your forum shortname
      

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


            <footer class="footer">
    <span class="footer__copyright">© 2015  All rights reserved.</span>
    <span class="footer__copyright"><a href="https://github.com/onevcat/vno">Vno</a> theme by <a href="http://im.onevcat.com">@onevcat</a></span>
</footer>        </div>
    </div>

    

    <!-- Compatibility for Ghost 0.7.0: http://dev.ghost.org/no-more-jquery/ -->
    <script type="text/javascript">  
      if (typeof jQuery == 'undefined') {
        document.write('<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></'+'script>');
      }
    </script>
    
    <script type="text/javascript" src="../assets/js/main.js?v=59a1498f09"></script>

    <script type="text/javascript" src="../assets/js/highlight.pack.js?v=59a1498f09"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</body>
